![GithubCI](https://github.com/sergtyapkin/interactive-site-writing-game-frontend/actions/workflows/deploy.yml/badge.svg)

# Интерактивный сайт для демонстрации совместного написания сайта от HTML и CSS до SPA на JS

  | 1. Вводим уникальное имя<br>![image](https://github.com/user-attachments/assets/03bb41e3-c723-4ee0-ab70-2d18b8529ca6)| 2. Выбираем один из разделов<br>![image](https://github.com/user-attachments/assets/0c2a1f37-d2b6-4c24-a24c-e81c7cb20ce3)|
 | --| --|
 | 3. Выбираем одну из задач в разделе<br>![image](https://github.com/user-attachments/assets/af02f4ad-db75-4501-8520-0a5eb0d5bec0)| 4. Пишем код решения. При этом наш код добавляется к общему<br>![image](https://github.com/user-attachments/assets/121361c6-b8ff-4b8f-8c5e-ccfed0dc75ab)|
 | 5. Админская страничка позволяет просматривать и рендерить в реальном времени общий код<br>![image](https://github.com/user-attachments/assets/52d67243-0cda-4d5f-a74b-35be327c0fd1)| 6. А так же очищать взятые людьми задачки ![image](https://github.com/user-attachments/assets/cb6fe7ba-6079-496c-877b-e386c58f67fd)|


# Создано из шаблона: Фронтенд на Vue.js с авто-деплоем на _Nginx_ в докере и автоматическим получением сертификатов _Letsencrypt_
В общем все, чтобы раскатить фронтенд за 10 минут на чистой машине с Ubuntu

## Развертка для разработки
```SHELL
npm run dev
```
_У вас должна быть установлена `node`. [Установка Node.js](https://nodejs.org/en/download)_

# Развертка в деплой
Развертка выполняется через команды в `Makefile`

## 1. Клонируем репозиторий:
```SHELL
git clone git@github.com:SergTyapkin/vue-frontend-template.git
```

## 2. Настраиваем вообще всё.
В самом начале нужно будет настроить `.env` файл, прописать правильный `DOMAIN_URL`
```SHELL
cd vue-frontend-template
make all # not just "make"!
````
Всё. Наслаждаемся тем, что за нас всё сделали, установили докер, сайт раздаётся, сертификаты обновляются.
Теперь `Github CI` сам будет проверять, собирается ли контейнер при **Pull Request**'ах, а при **Push**'ах в ветку `master` будет автоматически выполняться `make update` на сервере и обновлять деплой!

_После выполнения не забываем прописать переменные, значения которых команда выдала в консоль, в настройки окружения репозитория на Github, как это написано в пункте 3._

### Полный список действий скриптов
1. Устанавливает `docker`, если его ещё нет
2. Добавляет текущего пользователя в группу `Docker`, чтобы запускать его без `sudo`
3. Предлагает настроить `.env` файл
4. Получает сертификаты Letsencrypt
5. Устанавливает и настраивает `cron` на ежемесячное обновление сертификатов
6. Создаёт пару SSH ключей, публичный добавляет в `~/.ssh/authorized_keys`, приватный выводит в консоль, его нужно добавить как секретную переменную среды `SSH_DEPLOY_KEY` в настройках Github.
7. Собирает приложение из последнего коммита в ветку `master`, запускает финальный docker-контейнер с ним.
8. Показывает остальеые переменные, которые необходимо установить в настройках GitHub для настройки CI/CD.

## 3. Установка переменных
1. Заходим в `Settings` -> `Environments`, создаём новое окружение под названием `deploy` (важно).
![](/README_res/1.png)
2. Создаём внутри окружения все необходимые переменные. Их выведет `make all` после завершения выполнения, или можно прописать самому.
![](/README_res/2.png)
